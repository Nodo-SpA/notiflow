"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{3260:function(e,t,r){r.d(t,{zx:function(){return a},Zb:function(){return l},II:function(){return o},u_:function(){return c},Kx:function(){return i}});var s=r(7437);r(2265);var n=r(1994);let a=e=>{let{children:t,variant:r="primary",size:a="md",fullWidth:o=!1,loading:i=!1,disabled:l=!1,onClick:c,type:u="button",className:d}=e;return(0,s.jsxs)("button",{type:u,onClick:c,disabled:l||i,className:(0,n.Z)("font-semibold rounded-xl transition-all duration-200 flex items-center justify-center gap-2 shadow-sm hover:shadow-md active:shadow-inner",{primary:"bg-gradient-to-r from-primary to-primary-dark text-secondary shadow-[0_10px_30px_rgba(247,168,0,0.35)] hover:brightness-105 disabled:bg-gray-400 disabled:shadow-none",secondary:"bg-gradient-to-r from-secondary to-secondary/90 text-white shadow-[0_10px_30px_rgba(13,19,33,0.35)] hover:brightness-110 disabled:bg-gray-400 disabled:shadow-none",outline:"border-2 border-primary text-primary hover:bg-primary/10 disabled:border-gray-300 disabled:text-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-400",ghost:"text-secondary hover:bg-gray-100 border border-transparent hover:border-gray-200 disabled:text-gray-400"}[r],{sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-base",lg:"px-6 py-3 text-lg"}[a],o&&"w-full",(l||i)&&"cursor-not-allowed opacity-60",d),children:[i&&(0,s.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-current border-t-transparent animate-spin","aria-hidden":"true"}),t]})},o=e=>{let{label:t,placeholder:r,type:a="text",value:o,onChange:i,error:l,required:c,disabled:u}=e;return(0,s.jsxs)("div",{className:"w-full",children:[t&&(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t,c&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,s.jsx)("input",{type:a,placeholder:r,value:o,onChange:i,disabled:u,className:(0,n.Z)("w-full px-4 py-2.5 border rounded-xl font-medium transition-all backdrop-blur-sm","focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent shadow-sm hover:shadow",l?"border-red-500 bg-red-50":"border-white/70 bg-white/80 hover:border-primary/30",u&&"bg-gray-100 cursor-not-allowed opacity-60 shadow-none")}),l&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:l})]})},i=e=>{let{label:t,placeholder:r,value:a,onChange:o,rows:i=4,error:l,maxLength:c,disabled:u}=e;return(0,s.jsxs)("div",{className:"w-full",children:[t&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t}),(0,s.jsx)("textarea",{placeholder:r,value:a,onChange:o,rows:i,maxLength:c,disabled:u,className:(0,n.Z)("w-full px-4 py-2.5 border rounded-xl font-medium transition-all resize-none backdrop-blur-sm","focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent shadow-sm hover:shadow",l?"border-red-500 bg-red-50":"border-white/70 bg-white/80 hover:border-primary/30",u&&"bg-gray-100 cursor-not-allowed opacity-60 shadow-none")}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[l&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:l}),c&&(0,s.jsxs)("p",{className:"text-gray-500 text-sm ml-auto",children:[(null==a?void 0:a.length)||0,"/",c]})]})]})},l=e=>{let{children:t,className:r,onClick:a}=e;return(0,s.jsx)("div",{onClick:a,className:(0,n.Z)("glass-panel rounded-2xl border border-white/60 shadow-sm hover:shadow-lg transition-all",a&&"cursor-pointer hover:border-primary/40",r),children:t})},c=e=>{let{isOpen:t,title:r,children:o,onClose:i,onConfirm:l,confirmText:c="Confirmar",cancelText:u="Cancelar",size:d="md"}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 px-4",children:(0,s.jsxs)("div",{className:(0,n.Z)("bg-white rounded-lg shadow-xl w-full",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"w-full max-w-5xl"}[d]),children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:r})}),(0,s.jsx)("div",{className:"p-6",children:o}),(0,s.jsxs)("div",{className:"p-6 border-t border-gray-200 flex gap-3 justify-end",children:[(0,s.jsx)(a,{variant:"outline",onClick:i,children:u}),l&&(0,s.jsx)(a,{variant:"primary",onClick:l,children:c})]})]})}):null}},7855:function(e,t,r){r.d(t,{x:function(){return a}});var s=r(3464);class n{async getTeacherPermissions(){return this.client.get("/teacher-permissions")}async updateTeacherPermission(e,t){return this.client.put("/teacher-permissions/".concat(encodeURIComponent(e)),t)}async login(e,t){return this.client.post("/auth/login",{email:e,password:t})}async refresh(e){return this.client.post("/auth/refresh",{refreshToken:e})}async getAuthMe(){return this.client.get("/auth/me")}async logout(){return this.client.post("/auth/logout")}async sendMessage(e){return this.client.post("/messages",e,{timeout:12e4})}async getTemplates(){return this.client.get("/templates")}async createTemplate(e){return this.client.post("/templates",e)}async updateTemplate(e,t){return this.client.put("/templates/".concat(e),t)}async deleteTemplate(e){return this.client.delete("/templates/".concat(e))}async getUsageMetrics(){return this.client.get("/reports/usage")}async getMessages(e){return this.client.get("/messages",{params:e})}async getMessageById(e){return this.client.get("/messages/".concat(e))}async deleteMessage(e){return this.client.delete("/messages/".concat(e))}async getStudents(e){return this.client.get("/students",{params:e})}async createStudent(e){return this.client.post("/students",e)}async updateStudent(e,t){return this.client.put("/students/".concat(e),t)}async getSchoolData(){return this.client.get("/school")}async getSchoolById(e){return this.client.get("/schools/".concat(e))}async updateSchool(e,t){return this.client.put("/schools/".concat(e),t)}async createSchool(e){return this.client.post("/schools",e)}async uploadSchoolLogo(e,t){let r=new FormData;return r.append("file",t),this.client.post("/schools/".concat(e,"/logo"),r,{headers:{"Content-Type":"multipart/form-data"}})}async getCourses(e){return this.client.get("/courses",{params:{levelId:e}})}async getLevels(){return this.client.get("/levels")}async getCurrentUser(){return this.client.get("/auth/me")}async getUsers(e){return this.client.get("/users",{params:"string"==typeof e?{role:e}:e})}async createUser(e){return this.client.post("/users",e)}async updateUser(e,t){return this.client.put("/users/".concat(e),t)}async deleteUser(e){return this.client.delete("/users/".concat(e))}async requestOtp(e){return this.client.post("/auth/otp/request",{email:e})}async verifyOtp(e,t,r,s){return this.client.post("/auth/otp/verify",{email:e,code:t,studentId:r,studentsOnly:null!=s&&s})}async getSchools(){return this.client.get("/schools")}async getGroups(e,t,r,s,n){return this.client.get("/groups",{params:{schoolId:e,year:t,q:r,page:s,pageSize:n}})}async getEvents(e){return this.client.get("/events",{params:e})}async createEvent(e){return this.client.post("/events",e)}async deleteEvent(e){return this.client.delete("/events/".concat(e))}async createGroup(e){return this.client.post("/groups",e)}async updateGroup(e,t){return this.client.put("/groups/".concat(e),t)}async deleteGroup(e){return this.client.delete("/groups/".concat(e))}async forgotPassword(e){return this.client.post("/auth/forgot",{email:e})}async resetPassword(e,t){return this.client.post("/auth/reset",{token:e,newPassword:t})}async aiRewriteModerate(e,t,r){return this.client.post("/ai/rewrite-moderate",{text:e,subject:t,tone:r},{timeout:6e4})}async getAiPolicy(){return this.client.get("/ai/policy")}async updateAiPolicy(e){return this.client.put("/ai/policy",e)}async importStudentsCsv(e,t){let r=new FormData;return r.append("file",e),r.append("schoolId",t),this.client.post("/import/students",r,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4})}constructor(){this.isRefreshing=!1,this.refreshPromise=null,this.client=s.Z.create({baseURL:"https://notiflow-backend-179964029864.us-central1.run.app",timeout:45e3,headers:{"Content-Type":"application/json"}}),this.client.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),this.client.interceptors.response.use(e=>e,e=>{var t;let r=e.config;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)){let t=localStorage.getItem("refreshToken");return t?this.isRefreshing&&this.refreshPromise?this.refreshPromise.then(()=>(r.headers=r.headers||{},r.headers.Authorization="Bearer ".concat(localStorage.getItem("authToken")),this.client(r))):(this.isRefreshing=!0,this.refreshPromise=this.refresh(t).then(e=>{let{token:t,refreshToken:s}=e.data||{};return t&&localStorage.setItem("authToken",t),s&&localStorage.setItem("refreshToken",s),r.headers=r.headers||{},r.headers.Authorization="Bearer ".concat(t),this.client(r)}).catch(e=>(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e))).finally(()=>{this.isRefreshing=!1,this.refreshPromise=null}),this.refreshPromise):(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(e))}return Promise.reject(e)})}}let a=new n},2449:function(e,t,r){r.d(t,{GL:function(){return o},tN:function(){return a}});var s=r(9625);let n=e=>{if(!e)return[];try{let t=e.split(".")[1],r=atob(t);if(!r)return[];let s=JSON.parse(r),n=null==s?void 0:s.permissions;if(Array.isArray(n))return n.map(e=>(e||"").toLowerCase())}catch(e){}return[]},a=(0,s.Ue)((e,t)=>({user:null,permissions:[],isAuthenticated:!1,setUser:(t,r)=>{var s;let a=localStorage.getItem("authToken"),o=Array.isArray(null==t?void 0:t.permissions)?t.permissions:void 0,i=t?null!==(s=null!=r?r:o)&&void 0!==s?s:n(a):[];e({user:t,permissions:i,isAuthenticated:!!t})},hasPermission:e=>{if(!e)return!0;let{permissions:r,user:s}=t();if("global"===((null==s?void 0:s.schoolId)||"").toLowerCase())return!0;let n=r||[];if(!n.length)return!1;let a=e.toLowerCase();return n.includes("*")||n.includes(a)||n.includes("".concat(a,".self"))},logout:()=>{localStorage.removeItem("authToken"),e({user:null,permissions:[],isAuthenticated:!1})}}));(0,s.Ue)(e=>({levels:[],courses:[],students:[],selectedLevel:null,selectedCourse:null,setLevels:t=>e({levels:t}),setCourses:t=>e({courses:t}),setStudents:t=>e({students:t}),selectLevel:t=>e({selectedLevel:t,selectedCourse:null}),selectCourse:t=>e({selectedCourse:t})})),(0,s.Ue)(e=>({messages:[],draftMessages:[],addMessage:t=>e(e=>({messages:[t,...e.messages]})),addDraftMessage:t=>e(e=>({draftMessages:[t,...e.draftMessages]})),removeDraftMessage:t=>e(e=>({draftMessages:e.draftMessages.filter(e=>e.id!==t)})),setMessages:t=>e({messages:t})}));let o=(0,s.Ue)(e=>({year:new Date().getFullYear().toString(),setYear:()=>{e({year:new Date().getFullYear().toString()})}}))},4863:function(e,t){t.Z={src:"/_next/static/media/Naranjo_Degradado.4eb4b015.png",height:1201,width:1200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvklEQVR42g3FsS4DYQAA4O+qaa9avbgEtYhE4mYrk2foahOTN/AqXUw8gaWbzWzxAAaJ9KK44+r4zw1fvijcHjTilOEOg/Y4oT9ifYvhRMdXzuqbj3nrkeoTKc2I8lVX9U615PCK8ML2lN0jfgueZ7pWEcc3ZKf0YyB/IlTUdJSBpkex4OGaQUJd8xeo3nSVuJuSXbCYsX/CeI+6YHkvCpdRY5zSyxkjxuS8vUc1F4UzQYJkk+EPg5I17djI/AMFdkBDsVRqXwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}}}]);